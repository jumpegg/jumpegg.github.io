<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>CH 2 다양한 Nosql 데이터베이스(2.1, 2.2) | Wonny's note</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/feed.xml"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-102438172-1','auto');ga('send','pageview');</script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">CH 2 다양한 Nosql 데이터베이스(2.1, 2.2)</h1><a id="logo" href="/.">Wonny's note</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">CH 2 다양한 Nosql 데이터베이스(2.1, 2.2)</h1><div class="post-meta">Jul 25, 2017<span> | </span><span class="category"><a href="/categories/Nosql/">Nosql</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><h2 id="2-1-분산-데이터베이스에서의-데이터-관리"><a href="#2-1-분산-데이터베이스에서의-데이터-관리" class="headerlink" title="2.1 분산 데이터베이스에서의 데이터 관리"></a>2.1 분산 데이터베이스에서의 데이터 관리</h2><p>일반적인 데이터베이스에서 데이터를 저장하고 조회하는 목적을 달성하기 위해 데이터베이스 관리 시스템은 다음 세 가지 기능을 수행해야 한다.</p>
<ul>
<li>영구적인 데이터 저장</li>
<li>데이터 일관성 유지</li>
<li>데이터 가용성 확보</li>
</ul>
<h3 id="영구적인-데이터-저장"><a href="#영구적인-데이터-저장" class="headerlink" title="영구적인 데이터 저장"></a>영구적인 데이터 저장</h3><p>데이터는 영구적으로 저장되어야 한다. 이 말은 데이터베이스 서버가 고장나더라도 데이터는 소실되지 않고 저장되어야 한다는 뜻이다. 따라서 데이터는 디스크, 플래시, 테이프, 혹은 다른 장기기억장치에 저장된 데이터만이 영구적으로 저장됐다고 볼 수 있다.</p>
<h3 id="데이터-일관성-유지"><a href="#데이터-일관성-유지" class="headerlink" title="데이터 일관성 유지"></a>데이터 일관성 유지</h3><p>흔히 둘 이상의 사람이 데이터베이스를 사용하면서 같은 데이터를 동시에 사용하고자 할 때 읽기와 쓰기에 관한 이슈가 발생한다. 이 때 한 사람이 여러 데이터를 변경하면, 모든 데이터가 변경이 완료되었을때 다른 사람이 변경내역을 조회할 수 있도록 하는것이 데이터 일관성이라고 한다.</p>
<p>이렇게 여러 단계에 걸쳐 일어나는 과정을 단일작업처럼 처리하는 것을 트랜잭션이라 한다.</p>
<h3 id="데이터-가용성-확보"><a href="#데이터-가용성-확보" class="headerlink" title="데이터 가용성 확보"></a>데이터 가용성 확보</h3><p>데이터베이스는 수많은 원인으로 사용 불가 상태가 될 수 있다. 이러한 상황을 피하는 한 가지 방법은 두 대의 데이터베이스 서버를 운용하는 것이다. 데이터를 갱신하고 요청된 질의에 응답하는 데 사용되는 서버를 주 서버, 다른 서버를 백업 서버라고 한다. 백업 서버는 주 서버에 있는 데이터베이스의 복사본이다. </p>
<p>데이터베이스 트랜잭션 작업으로 주 서버에 데이터를 넣고 백업서버에 복사하는 과정까지 하나의 과정으로 묶으면 데이터의 일관성이 유지된다. </p>
<p>이렇게 데이터베이스 서버 두 대를 운용하면 서버 하나가 고장 나더라도 다른 한 대의 서버를 사용할 수 있다는 장점이 있다. 쓸만하지만 비용 문제가 수반되는 방식이며, 데이터베이스 애플리케이션과 애플리케이션 사용자는 데이터 쓰기 작업이 완료될 때까지 기다려야 한다는 단점이 있다.</p>
<h3 id="응답-시간-일관성-지속성-간의-균형-맞추기"><a href="#응답-시간-일관성-지속성-간의-균형-맞추기" class="headerlink" title="응답 시간 - 일관성 - 지속성 간의 균형 맞추기"></a>응답 시간 - 일관성 - 지속성 간의 균형 맞추기</h3><p>Nosql 데이터베이스는 결과적 일관성을 구현한다. 즉, 데이터 복사본들이 다른 값을 갖는 시기가 있지만 결국에는 모든 복사본이 같은 값을 갖게 된다는 뜻이다.</p>
<p>Nosql 데이터베이스는 종종 읽기와 쓰기 작업을 할 때 쿼럼이란 개념을 사용한다. 쿼럼은 완료되었다고 여겨지는 읽기나 쓰기 작업에 반드시 응답해야 하는 서버의 수를 말한다.</p>
<p>읽기 작업이 수행될 때 Nosql 데이터베이스는 서버 여러 대에서 데이터를 읽는다. 읽기 작업에 올바른 응답을 하는 한 가지 방법은 해당 데이터가 저장된 모든 서버에 질의하는 것이다. 그리고 데이터베이스는 반환되는 응답값 중 유일한 응답값의 수를 세어 구성임계값(configurable threshold)과 같거나 이를 초과하는 응답값을 반환한다.</p>
<p>읽기 임계값을 작게 할 수록 응답은 빨라지지만 일관성이 깨진 데이터가 반환될 위험은 커진다. 예를 들면 서버 5대에 데이터를 복제하는경우, 읽기 임계값을 3으로 잡으면 3대에 복제가 된 상태에서 데이터를 반환하게 된다.</p>
<h3 id="CAP-이론-일관성-가용성-그리고-파티셔닝"><a href="#CAP-이론-일관성-가용성-그리고-파티셔닝" class="headerlink" title="CAP 이론: 일관성, 가용성, 그리고 파티셔닝"></a>CAP 이론: 일관성, 가용성, 그리고 파티셔닝</h3><p>컴퓨터 과학자인 에릭 브루어의 이론으로 알려진 CAP 이론은, 분산 데이터베이스는 일관성(C), 가용성(A), 파티션 허용(P) 이 세가지 속성을 동시에 가질 수 없다는 내용이다. 여기서 일관성은 서버 간에 일관된 데이터를 유지함, 가용성은 질의에 대한 응답을 제공함, 파티션 허용은 둘 이상의 데이터베이스 서버가 연결된 네트워크에 문제가 생기더라도 이 서버들은 여전히 일관된 데이터를 갖고 있다는 뜻이다.</p>
<h2 id="2-2-ACID-와-BASE"><a href="#2-2-ACID-와-BASE" class="headerlink" title="2.2 ACID 와 BASE"></a>2.2 ACID 와 BASE</h2><h3 id="ACID-원자성-일관성-고립성-지속성"><a href="#ACID-원자성-일관성-고립성-지속성" class="headerlink" title="ACID: 원자성, 일관성, 고립성, 지속성"></a>ACID: 원자성, 일관성, 고립성, 지속성</h3><p>A는 원자성 <em>Atomicity</em> 을 가리킨다. 원자성이란 말 그대로 더는 분할되지 않는 단위를 말한다. 트랜잭션처럼<br>여러 단계를 한번에 처리하는것은 하나의 처리단위로 봐야 한다는 것이다.</p>
<p>C는 일관성 <em>Consistency</em> 을 의미한다. 관계형 데이터베이스에서는 엄격한 일관성 이라고도 한다. 다른 말로 풀어 설명하면 트랜잭션은 데이터의 무결성을 위반한 상태로 데이터베이스를 내버려 두지 않는다는 뜻이다.</p>
<p>I는 고립성 <em>Isolation</em> 을 뜻한다. 고립된 트랜잭션은 완료되기 전까지 다른 사용자들에게 보이지 않는다. </p>
<p>D는 지속성 <em>Durability</em> 을 뜻한다. 일단 한 트랜잭션이나 작업 하나가 완료되면 서버에 전원공급이 끊어지는 상황에서도 데이터가 완료된 상태로 남아 있음을 의미한다. 즉 데이터가 디스크나 플래시 등의 영구저장매채에 저장된다는 뜻이다.</p>
<p>관계형 데이터베이스 관리 시스템은 ACID 트랜잭션을 지원하도록 설계되었다. Nosql 데이터베이스는 일반적으로 BASE 트랜잭션을 지원하는데, 일부 Nosql 데이터베이스는 일정 수준에서 ACID 트랜잭션을 지원하기도 한다.</p>
<h3 id="BASE-기본적인-가용성-소프트-상태-결과적-일관성"><a href="#BASE-기본적인-가용성-소프트-상태-결과적-일관성" class="headerlink" title="BASE: 기본적인 가용성, 소프트 상태, 결과적 일관성"></a>BASE: 기본적인 가용성, 소프트 상태, 결과적 일관성</h3><p>BA는 기본적인 가용성 <em>Basically Available</em> 을 뜻한다. 이 말은 분산 시스템에서 부분적인 고장이나 실패는 있을 수 있지만, 시스템의 나머지 부분은 계속 기능을 수행한다는 의미다. Nosql 데이터베이스는 종종 다른 서버에 복사본을 여러 개 만들어 두어, 서버 중 한 대에 문제가 생기더라도 요청된 질의에 응답할 수 있게 한다.</p>
<p>S는 소프트 상태 <em>Soft State</em> 를 가리킨다. 일반적으로 컴퓨터 과학에서 소프트 상태는 새로 고쳐지지 않으면 데이터가 소실된다는 뜻이다. Nosql에서 소프트 상태란 결국 데이터가 더 최신 상태인 데이터로 덮여 쓰이는 것을 마한다.</p>
<p>E는 결과적 일관성 <em>Eventually Consistent</em> 을 말한다. 이 말은 데이터베이스가 일관성이 없는 상태가 될때가 있음을 의미한다.</p>
<h3 id="결과적-일관성의-유형"><a href="#결과적-일관성의-유형" class="headerlink" title="결과적 일관성의 유형"></a>결과적 일관성의 유형</h3><p>결과적 일관성은 Nosql 데이터베이스에서 매우 중요한 특성이다. 결과적 일관성에는 다음과 같이 몇 가지 유형이 있다.</p>
<ul>
<li>인과적 일관성 <em>casual consistency</em></li>
<li>최신 데이터 읽기 일관성 <em> read-your-writes consistency</em></li>
<li>세션 일관성 <em>session consistency</em></li>
<li>단조 읽기 일관성 <em>monotonic read consistency</em></li>
<li>단조 쓰기 일관성 <em>monotonic write consistency</em></li>
</ul>
<h4 id="인과적-일관성"><a href="#인과적-일관성" class="headerlink" title="인과적 일관성"></a>인과적 일관성</h4><p>인과적 일관성은 데이터베이스가 작업이 갱신된 순서를 반영하는 것을 보장한다. 예를들어 A가 데이터를 1000으로 변경하고, 1초뒤 B가 데이터를 2000 변경하면, 이 데이터의 모든 복사본은 먼저 1000으로 갱신된 후 2000으로 갱신된다.</p>
<h4 id="최신-데이터-읽기-일관성"><a href="#최신-데이터-읽기-일관성" class="headerlink" title="최신 데이터 읽기 일관성"></a>최신 데이터 읽기 일관성</h4><p>최신 데이터 읽기 일관성은 일단 레코드 하나를 갱신했다면 이 레코드에 대한 모든 질의는 갱신된 값을 반환받는다는 의미로 이전에 기록한 값과 일치하지 않는 값을 반환받을 일은 절대 없다는 것이다.</p>
<h4 id="세션-일관성"><a href="#세션-일관성" class="headerlink" title="세션 일관성"></a>세션 일관성</h4><p>세션 일관성은 세션이 살아있는 동안 최신 데이터 읽기 일관성을 보장한다. 세션이란 클라이언트와 서버 간, 혹은 사용자와 데이터베이스 간의 대화라고 생각하면 된다. 이러한 대화가 지속되는 한 데이터베이스는 대화 중 수행했던 모든 읽기 작업을 기억하고 있다. 만약 세션이 종료되고 같은 서버와 또 다른 세션을 연결했다면 이 서버가 이전 세션에서 수행한 내역을 기억할거라고 보장할 수 없다.</p>
<h4 id="단조-읽기-일관성"><a href="#단조-읽기-일관성" class="headerlink" title="단조 읽기 일관성"></a>단조 읽기 일관성</h4><p>단조 읽기 일관성은 질의를 해서 그 결과를 볼 때 해당 값의 이전버전은 절대 볼 수 없다는 뜻이다.</p>
<h4 id="단조-쓰기-일관성"><a href="#단조-쓰기-일관성" class="headerlink" title="단조 쓰기 일관성"></a>단조 쓰기 일관성</h4><p>단조 쓰기 일관성은 몇 개의 갱신 명령어를 실행했을 때 이 명령어들이 실행된 순서대로 처리됨을 뜻한다.</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="https://jumpegg.github.io/2017/07/25/nosql01/" data-id="cj5yxnntd001hz4uf8qtpmfao" class="article-share-link">Share</a><div class="tags"></div><div class="post-nav"><a href="/2017/07/25/nosql02/" class="pre">CH 2 다양한 Nosql 데이터베이스(2.1, 2.2)</a><a href="/2017/07/23/mysql-index4/" class="next">CH 5 인덱스(5.7)</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript-Pattern/">Javascript Pattern</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mysql/">Mysql</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nosql/">Nosql</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ionic2/">ionic2</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/문제해결/">문제해결</a><span class="category-list-count">3</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/ionic2-nav/" style="font-size: 15px;">ionic2-nav</a> <a href="/tags/Mysql/" style="font-size: 15px;">Mysql</a> <a href="/tags/nginx-파일업로드/" style="font-size: 15px;">nginx 파일업로드</a> <a href="/tags/explain/" style="font-size: 15px;">explain</a> <a href="/tags/ionic-root/" style="font-size: 15px;">ionic-root</a> <a href="/tags/ionic2-menu/" style="font-size: 15px;">ionic2-menu</a> <a href="/tags/index/" style="font-size: 15px;">index</a> <a href="/tags/transection/" style="font-size: 15px;">transection</a> <a href="/tags/pattern/" style="font-size: 15px;">pattern</a> <a href="/tags/angular-model-detection/" style="font-size: 15px;">angular-model-detection</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/08/05/problem03/">angular2 ngFor 문제해결</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/05/mysql-explain1/">CH 6 실행계획(6.1, 6.2)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/25/nosql02/">CH 2 다양한 Nosql 데이터베이스(2.1, 2.2)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/25/nosql01/">CH 2 다양한 Nosql 데이터베이스(2.1, 2.2)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/23/mysql-index4/">CH 5 인덱스(5.7)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/22/mysql-index3/">CH 5 인덱스(5.4, 5.5, 5.6)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/22/mysql-index2/">CH 5 인덱스(5.3)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/21/mysql-index1/">CH 5 인덱스(5.1, 5.2)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/20/pattern-object3/">Javascript 패턴 - 객체 생성 패턴 3</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/20/angular2-problem-01/">nginx 파일업로드 문제</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="http://textshare.io" title="textshare.io" target="_blank">textshare.io</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">Wonny's note.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>