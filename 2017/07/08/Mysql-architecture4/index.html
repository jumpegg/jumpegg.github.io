<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>3. Mysql 아키텍처(3.7, 3.8) | Wonny's note</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/feed.xml"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-102438172-1','auto');ga('send','pageview');</script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">3. Mysql 아키텍처(3.7, 3.8)</h1><a id="logo" href="/.">Wonny's note</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">3. Mysql 아키텍처(3.7, 3.8)</h1><div class="post-meta">Jul 8, 2017<span> | </span><span class="category"><a href="/categories/Mysql/">Mysql</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><h1 id="3-7-전문-검색-엔진-Fulltext-search-engine"><a href="#3-7-전문-검색-엔진-Fulltext-search-engine" class="headerlink" title="3.7 전문 검색 엔진(Fulltext search engine)"></a>3.7 전문 검색 엔진(Fulltext search engine)</h1><p>최근 인터넷 서비스는 대부분 본문 검색이 기본적으로 포함되는 경우가 많은데, 이러한 요건은 전문 검색 엔진 없이는 구현하기가 쉽지 않다. 여기서는 한글을 지원하고, 어느정도 수준의 성능을 보장하고 있는 트리톤과 스핑크스라는 검색엔진을 간단하게 살펴본다.</p>
<h2 id="3-7-1-트리톤-전문-검색-엔진"><a href="#3-7-1-트리톤-전문-검색-엔진" class="headerlink" title="3.7.1 트리톤 전문 검색 엔진"></a>3.7.1 트리톤 전문 검색 엔진</h2><p>트리톤을 사용하려면 먼저 Mysql의 소스코드를 패치한 후, 다시 빌드해야 하며 그 이후에 InnoDB같이 하나의 스토리지 엔진으로 사용할 수 있다. 한, 중, 일 아시아권 언어 지원이 강점이며 또한 세나(Senna) 라이브러리를 이용한 빠른 인덱싱과 검색을 제공한다. 또한 Mysql 서버의 전문 검색엔진과 달리 N-그램 방식의 인덱싱도 사용할 수 있다는 것이 가장 큰 장점이다.</p>
<h2 id="3-7-2-mGroonga-전문-검색-엔진-플러그인"><a href="#3-7-2-mGroonga-전문-검색-엔진-플러그인" class="headerlink" title="3.7.2 mGroonga 전문 검색 엔진(플러그인)"></a>3.7.2 mGroonga 전문 검색 엔진(플러그인)</h2><p>트리톤은 Mysql 5.0.87 버전에서만 사용할 수 있다. 트리톤을 5.1, 5.5 버전에서 사용해야 한다면 트리톤의 후속작인 Groonga 라는 전문 검색 엔진을 사용해야 한다. 하지만 Groonga는 Mysql과 전혀 연관없이 독립적으로 기동하는 소프트웨어라서 Mysql에 익숙한 사용자를 위해 mGroonga 라는 플러그인을 함께 제공한다.</p>
<h2 id="3-7-3-스핑크스-전문-검색-엔진"><a href="#3-7-3-스핑크스-전문-검색-엔진" class="headerlink" title="3.7.3 스핑크스 전문 검색 엔진"></a>3.7.3 스핑크스 전문 검색 엔진</h2><p>스핑크스는 Mysql 서버와는 전혀 연관이 없이 자체적인 저장 공간을 가지고 별도의 프로세스로 작동하며, Mysql 서버를 통해 접근할 수 있는 인터페이스만 제공하는 형태의 스토리지 엔진이다.</p>
<p>N-그램방식의 인덱싱과 UTF-8 언어를 지원하는것과 분산처리 기능이 상당히 뛰어나다는 것이 장점이다.</p>
<h1 id="3-8-Mysql-로그-파일"><a href="#3-8-Mysql-로그-파일" class="headerlink" title="3.8 Mysql 로그 파일"></a>3.8 Mysql 로그 파일</h1><h2 id="3-8-1-에러-로그-파일"><a href="#3-8-1-에러-로그-파일" class="headerlink" title="3.8.1 에러 로그 파일"></a>3.8.1 에러 로그 파일</h2><p>Mysql이 실행되는 도중에 발생하는 에러나 경고 메세지가 출력되는 로그 파일이다. 에러 로그 파일의 위치는 configure 파일에 “log_error” 라는 이름의 파라미터에 정의된 경로에 있는 파일이거나, 별도로 지정되지 않은 경우에는 데이터 디렉터리에 “.err” 확장자가 붙은 파일이다. 여러가지 메시지가 다양하게 출력되지만 다음에 소개되는 메시지를 가장 자주 보게 될 것이다.</p>
<ul>
<li>Mysql 이 시작하는 과정과 관련된 정보성 및 에러 메시지</li>
<li>마지막으로 종료할 때 비정상적으로 종료된 경우 나타나는 InnoDB의 트랜잭션 복구 메시지</li>
<li>쿼리 처리 도중에 발생하는 문제에 대한 에러 메시지</li>
<li>비정상적으로 종료된 커넥션 메시지</li>
<li>InnoDB의 모니터링 명령이나 상태 조회 명령의 결과 메시지</li>
<li>Mysql 종료 메시지</li>
</ul>
<h2 id="3-8-2-제너럴-쿼리-로그-파일"><a href="#3-8-2-제너럴-쿼리-로그-파일" class="headerlink" title="3.8.2 제너럴 쿼리 로그 파일"></a>3.8.2 제너럴 쿼리 로그 파일</h2><p>쿼리 로그파일은 configure 파일의 “general-log” 라는 이름의 파라메터에 정의된 경로에 있는 파일이고 Mysql 5.1.12 이상의 버전에서는 “general_log_file” 이라는 이름의 파라메터에 정의된 경로에 있는 파일이다.</p>
<h2 id="3-8-3-슬로우-쿼리-로그"><a href="#3-8-3-슬로우-쿼리-로그" class="headerlink" title="3.8.3 슬로우 쿼리 로그"></a>3.8.3 슬로우 쿼리 로그</h2><p>Mysql 서버의 쿼리 튜닝은 크게 서비스가 적용되기 전에 전체적으로 튜닝하는 경우와 서비스 운영중에 Mysql 서버의 전체적인 성능 저하를 검사하거나 또는 정기적인 점검을 위한 튜닝으로 나눌 수 있다. 전자의 경우에는 검토해야 할 대상 쿼리가 전부라서 모두 튜닝하면 되지만, 후자의 경우에는 어떤 쿼리가 문제의 쿼리인지 판단하기가 상당히 어렵다. 이런 경우에 서비스에서 사용되고 있는 쿼리 중에서 어떤 쿼리가 문제인지를 판단하는데 슬로우 쿼리 로그가 상당히 많은 도움이 된다.</p>
<p>슬로우 쿼리 로그 파일에는 configure 에서 정의한 시간(long_query_time) 이상의 시간이 소요된 쿼리가 모두 기록된다. 실제 소요된 시간을 기준으로 기록 여부를 판단하기 때문에 정상적으로 실행된 쿼리만 기록된다.</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="https://jumpegg.github.io/2017/07/08/Mysql-architecture4/" data-id="cj5no6iti000ck0ufyswhhdgm" class="article-share-link">Share</a><div class="tags"><a href="/tags/Mysql/">Mysql</a></div><div class="post-nav"><a href="/2017/07/09/Ionic-nav-guard/" class="pre">Ionic Guard 구현</a><a href="/2017/07/08/Mysql-architecture3/" class="next">3. Mysql 아키텍처(3.4, 3.5, 3.6)</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript-Pattern/">Javascript Pattern</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mysql/">Mysql</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nosql/">Nosql</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ionic2/">ionic2</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/문제해결/">문제해결</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/ionic2-nav/" style="font-size: 15px;">ionic2-nav</a> <a href="/tags/Mysql/" style="font-size: 15px;">Mysql</a> <a href="/tags/nginx-파일업로드/" style="font-size: 15px;">nginx 파일업로드</a> <a href="/tags/ionic2-menu/" style="font-size: 15px;">ionic2-menu</a> <a href="/tags/index/" style="font-size: 15px;">index</a> <a href="/tags/ionic-root/" style="font-size: 15px;">ionic-root</a> <a href="/tags/transection/" style="font-size: 15px;">transection</a> <a href="/tags/pattern/" style="font-size: 15px;">pattern</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/07/25/nosql02/">CH 2 다양한 Nosql 데이터베이스(2.1, 2.2)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/25/nosql01/">CH 2 다양한 Nosql 데이터베이스(2.1, 2.2)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/23/mysql-index4/">CH 5 인덱스(5.7)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/22/mysql-index3/">CH 5 인덱스(5.4, 5.5, 5.6)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/22/mysql-index2/">CH 5 인덱스(5.3)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/21/mysql-index1/">CH 5 인덱스(5.1, 5.2)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/20/pattern-object3/">Javascript 패턴 - 객체 생성 패턴 3</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/20/angular2-problem-01/">nginx 파일업로드 문제</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/18/pattern-object2/">Javascript 패턴 - 객체 생성 패턴 2</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/18/pattern-object1/">Javascript 패턴 - 객체 생성 패턴 1</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="http://textshare.io" title="textshare.io" target="_blank">textshare.io</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">Wonny's note.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>